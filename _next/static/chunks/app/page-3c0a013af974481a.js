(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{146:(e,r,t)=>{Promise.resolve().then(t.bind(t,6757))},6757:(e,r,t)=>{"use strict";t.d(r,{ImageConverter:()=>O});var s=t(5155),a=t(2115),i=t(6766),n=t(9311),o=t.n(n),l=t(1540),d=t(6923),c=t(172),m=t(8579),u=t(1133),f=t(7554),g=t(8718),x=t(4253),v=t(2085),p=t(9434);let h=(0,v.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),b=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:n=!1,...o}=e,l=n?x.DX:"button";return(0,s.jsx)(l,{className:(0,p.cn)(h({variant:a,size:i,className:t})),ref:r,...o})});b.displayName="Button";let j=(0,v.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function w(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,p.cn)(j({variant:t}),r),...a})}let N=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,p.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});N.displayName="Card",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,p.cn)("flex flex-col space-y-1.5 p-6",t),...a})}).displayName="CardHeader",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,p.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})}).displayName="CardTitle",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,p.cn)("text-sm text-muted-foreground",t),...a})}).displayName="CardDescription";let y=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,p.cn)("p-6 pt-0",t),...a})});y.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,p.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter";var S=t(7481);let C=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(r<0?0:r))+" "+["Bytes","KB","MB","GB","TB"][t]},A=["JPG","PNG","GIF","BMP","TIFF","AVIF"];function O(){let[e,r]=(0,a.useState)([]),[t,n]=(0,a.useState)(!1),[x,v]=(0,a.useState)(!1),h=(0,a.useRef)(null),{toast:j}=(0,S.dj)(),O=(0,a.useCallback)(e=>{let r=null;(r="dataTransfer"in e?e.dataTransfer.files:e.target.files)&&F(Array.from(r))},[]),F=t=>{t.forEach(t=>{let s="".concat(t.name,"-").concat(t.lastModified,"-").concat(t.size);if(e.some(e=>e.id===s))return;let a={id:s,originalFile:t,originalSize:t.size,originalPreviewUrl:URL.createObjectURL(t),isConverting:!0};r(e=>[...e,a]),T(t).then(e=>{let a=e.size>t.size;a&&j({variant:"default",title:"Conversion not optimal",description:"".concat(t.name," is larger after conversion. Original will be used.")}),r(r=>r.map(r=>r.id===s?{...r,isConverting:!1,convertedBlob:e,convertedSize:e.size,convertedPreviewUrl:URL.createObjectURL(e),isLarger:a}:r))}).catch(e=>{console.error("Conversion error:",e),r(e=>e.map(e=>e.id===s?{...e,isConverting:!1,error:"Failed to convert. Browser may not support this format."}:e))})})},T=e=>new Promise((r,t)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=e=>{var s;let a=document.createElement("img");a.src=null==(s=e.target)?void 0:s.result,a.onload=()=>{let e=document.createElement("canvas");e.width=a.width,e.height=a.height;let s=e.getContext("2d");if(!s)return t(Error("Could not get canvas context."));s.drawImage(a,0,0),e.toBlob(e=>{e?r(e):t(Error("Canvas toBlob returned null."))},"image/webp",.85)},a.onerror=()=>t(Error("Image could not be loaded."))},s.onerror=()=>t(Error("File could not be read."))}),E=(0,a.useCallback)(e=>{e.preventDefault(),n(!0)},[]),I=(0,a.useCallback)(e=>{e.preventDefault(),n(!1)},[]),P=(0,a.useCallback)(e=>{e.preventDefault(),n(!1),O(e)},[O]),D=async()=>{let r=e.filter(e=>e.convertedBlob||e.isLarger);if(0===r.length)return void j({variant:"destructive",title:"No images to download",description:"Please convert some images first."});v(!0);try{let e=new(o());r.forEach(r=>{let t=r.originalFile.name.substring(0,r.originalFile.name.lastIndexOf("."));r.isLarger?e.file(r.originalFile.name,r.originalFile):e.file("".concat(t,".webp"),r.convertedBlob)});let t=await e.generateAsync({type:"blob"});(0,l.saveAs)(t,"WebP_Speedy_Images.zip")}catch(e){console.error("Zipping error:",e),j({variant:"destructive",title:"Error creating ZIP",description:"Could not create the ZIP file."})}finally{v(!1)}},R=e=>{if(e.isLarger)(0,l.saveAs)(e.originalFile,e.originalFile.name);else if(e.convertedBlob){let r=e.originalFile.name.substring(0,e.originalFile.name.lastIndexOf("."));(0,l.saveAs)(e.convertedBlob,"".concat(r,".webp"))}};return(0,a.useEffect)(()=>()=>{e.forEach(e=>{URL.revokeObjectURL(e.originalPreviewUrl),e.convertedPreviewUrl&&URL.revokeObjectURL(e.convertedPreviewUrl)})},[e]),(0,s.jsxs)("div",{className:"w-full max-w-4xl",children:[(0,s.jsx)(N,{className:"bg-card/80 backdrop-blur-sm",children:(0,s.jsxs)(y,{className:"p-6",children:[(0,s.jsxs)("div",{className:(0,p.cn)("flex flex-col items-center justify-center w-full h-64 border-2 border-dashed rounded-lg cursor-pointer transition-colors",t?"border-primary bg-primary/10":"border-border hover:border-primary/50 hover:bg-muted/50"),onDragOver:E,onDragLeave:I,onDrop:P,onClick:()=>{var e;return null==(e=h.current)?void 0:e.click()},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,s.jsx)(d.A,{className:"w-10 h-10 mb-4 text-primary"}),(0,s.jsx)("p",{className:"mb-2 text-lg font-semibold text-foreground",children:"Drop your images here"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"or click to browse"})]}),(0,s.jsx)("input",{ref:h,type:"file",multiple:!0,accept:"image/jpeg,image/png,image/gif,image/bmp,image/tiff,image/avif",className:"hidden",onChange:O})]}),(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2 mt-4",children:A.map(e=>(0,s.jsx)(w,{variant:"secondary",children:e},e))}),(0,s.jsx)("p",{className:"text-xs text-center text-muted-foreground mt-2",children:"* We are still experimenting with AVIF to WebP compression."})]})}),e.length>0&&(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-foreground",children:"Conversion Results"}),(0,s.jsxs)(b,{onClick:D,disabled:x||e.some(e=>e.isConverting),children:[x?(0,s.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Download All"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>(0,s.jsx)(N,{className:"overflow-hidden",children:(0,s.jsxs)(y,{className:"p-4 grid grid-cols-2 gap-4 items-center",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold truncate text-foreground",children:"Original"}),(0,s.jsx)("div",{className:"aspect-video bg-muted rounded-md flex items-center justify-center",children:(0,s.jsx)(i.default,{src:e.originalPreviewUrl,alt:"Original",width:160,height:90,className:"max-h-full max-w-full object-contain rounded-md"})}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.originalFile.name}),(0,s.jsx)("p",{className:"text-xs font-medium text-foreground",children:C(e.originalSize)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:e.isLarger?"Original (Optimal)":"WebP"}),(0,s.jsxs)("div",{className:"aspect-video bg-muted rounded-md flex items-center justify-center",children:[e.isConverting&&(0,s.jsx)(c.A,{className:"w-8 h-8 text-primary animate-spin"}),e.error&&(0,s.jsx)(u.A,{className:"w-8 h-8 text-destructive"}),e.isLarger&&(0,s.jsx)(i.default,{src:e.originalPreviewUrl,alt:"Original because it is smaller",width:160,height:90,className:"max-h-full max-w-full object-contain rounded-md"}),e.convertedPreviewUrl&&!e.isLarger&&(0,s.jsx)(i.default,{src:e.convertedPreviewUrl,alt:"Converted",width:160,height:90,className:"max-h-full max-w-full object-contain rounded-md"})]}),e.error?(0,s.jsx)("p",{className:"text-xs text-destructive",children:e.error}):void 0!==e.convertedSize?(0,s.jsx)(s.Fragment,{children:e.isLarger?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[C(e.originalSize),(0,s.jsx)("span",{className:"ml-2 text-blue-400 font-bold",children:"(Optimal)"})]}),(0,s.jsxs)(b,{size:"sm",className:"w-full",onClick:()=>R(e),children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Download Original"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[C(e.convertedSize),e.convertedSize<e.originalSize&&(0,s.jsxs)("span",{className:"ml-2 text-green-400 font-bold",children:["(-",((e.originalSize-e.convertedSize)/e.originalSize*100).toFixed(0),"%)"]})]}),(0,s.jsxs)(b,{size:"sm",className:"w-full",onClick:()=>R(e),children:[(0,s.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Download"]})]})}):(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Converting..."})]})]})},e.id))})]})]})}},7481:(e,r,t)=>{"use strict";t.d(r,{dj:()=>u});var s=t(2115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)},o=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function m(e){let{...r}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,r]=s.useState(d);return s.useEffect(()=>(l.push(r),()=>{let e=l.indexOf(r);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var s=t(2596),a=t(9688);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,s.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[511,319,441,684,358],()=>r(146)),_N_E=e.O()}]);